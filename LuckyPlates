local function NewPlate(Position,Name,Parent,Size)
	local o1 = Instance.new("Part")
	o1.Name = Name
	o1.Material = Enum.Material.SmoothPlastic
	o1.Anchored = true
	o1.Locked = true
	o1.Size = Size or Vector3.new(8, 1, 8)
	o1.Position = Position
	o1.CFrame = CFrame.new(Position)
	o1.BottomSurface = Enum.SurfaceType.Smooth
	o1.TopSurface = Enum.SurfaceType.Smooth
	o1.Parent = Parent or script
	return o1
end
local Players = game:GetService("Players")
function GetPlayersOnTeam(Team)
	local TeamPlayers = {}
	for _,Player in pairs(Players:GetPlayers()) do
		if Player.Team == Team then
			table.insert(TeamPlayers,#TeamPlayers + 1,Player)
		end
	end
	return TeamPlayers
end
local Teams = game:GetService("Teams")
local Alive = Instance.new("Team",Teams)
Alive.TeamColor = BrickColor.new("White")
Alive.Name = "Plates (Alive)"
Alive.AutoAssignable = false
local Dead = Instance.new("Team",Teams)
Dead.TeamColor = BrickColor.new("White")
Dead.Name = "Plates (Dead)"
Dead.AutoAssignable = false
Teams.DescendantRemoving:Connect(function(Team)
	if Team == Dead then
		Dead = Instance.new("Team",Teams)
		Dead.TeamColor = BrickColor.new("White")
		Dead.Name = "Plates (Dead)"
		Dead.AutoAssignable = false
	elseif Team == Alive then
		Alive = Instance.new("Team",Teams)
		Alive.TeamColor = BrickColor.new("White")
		Alive.Name = "Plates (Alive)"
		Alive.AutoAssignable = false
	end
end)
local Origin = Vector3.new((4096 * 16),0,(4096 * 16) - 24)
local Spacing = Vector3.new(48,0,48)
local Plates = Instance.new("Folder",script)
Plates.Name = "Plates"
local function OnPlayerAdded(Player)
	Player.Chatted:Connect(function(Message,Recipient)
		if Recipient == nil then
			if Message == "/plates join" and Player.TeamColor == BrickColor.White() and Player.Neutral == true and (#(GetPlayersOnTeam(Dead)) + #(GetPlayersOnTeam(Alive))) < 9 then
				Player.Team = Dead
				Player.Neutral = false
			elseif Message == "/plates leave" and (Player.Team == Dead or Player.Team == Alive) and Player.Neutral == false then
				if Player.Team == Alive then
					Player:LoadCharacter()
				end
				Player.TeamColor = BrickColor.White()
				Player.Neutral = true
			end
		end
	end)
	Player.CharacterAdded:Connect(function(Character)
		Character.Humanoid.Died:Connect(function()
			if Player.Team == Alive then
				Player.Team = Dead
				local Plate = Plates:FindFirstChild(Player.Name)
				if Plate then
					Plate.BrickColor = BrickColor.new("Bright red")
					Plate.Transparency = 0.5
					local Debris = game:GetService("Debris")
					Debris:AddItem(Plate,5)
				end
			end
		end)
	end)
	if Player.Character ~= nil then
		local Character = Player.Character
		Character.Humanoid.Died:Connect(function()
			if Player.Team == Alive then
				Player.Team = Dead
				local Plate = Plates:FindFirstChild(Player.Name)
				if Plate then
					Plate.BrickColor = BrickColor.new("Really red")
					Plate.Transparency = 0.5
					local Debris = game:GetService("Debris")
					Debris:AddItem(Plate,5)
				end
			end
		end)
	end
end
Players.PlayerAdded:Connect(OnPlayerAdded)
	for _,Player in pairs(Players:GetPlayers()) do
		OnPlayerAdded(Player)
	end
while true do
	local Hint = Instance.new("Message",script)
	Hint.Text = "Waiting for Players... do /plates join"
	wait(5)
	Hint.Text = ""
	repeat wait() until (#(GetPlayersOnTeam(Dead)) + #(GetPlayersOnTeam(Alive))) > 1
	while (#(GetPlayersOnTeam(Dead)) + #(GetPlayersOnTeam(Alive))) > 1 do
		Hint.Text = "Starting in 10 seconds..."
		wait(2)
		Hint.Text = ""
		wait(8)
		if (#(GetPlayersOnTeam(Dead)) + #(GetPlayersOnTeam(Alive))) > 1 then
			local DeadPlayers = GetPlayersOnTeam(Dead)
			for z = 0,5,5 do
				for x = 1,5,1 do
					local Player = DeadPlayers[x + z]
					if Player ~= nil then
						local Plate = NewPlate(Origin + (Spacing * Vector3.new(x,0,z / 5)),Player.Name,Plates)
						if Player.Character == nil then
							Player:LoadCharacter(true)
						end
						Player.Team = Alive
						Player.Character:MoveTo(Plate.Position)
					else
						local Plate = NewPlate(Origin + (Spacing * Vector3.new(x,0,z / 5)),"Dummy",Plates)
					end
					wait(0.1)
				end
			end
			while #(GetPlayersOnTeam(Alive)) > 1 do
				wait(3)
				math.randomseed(os.time())
				local EventID = math.random(1,3)
				if EventID == 1 then
					local PlateID = math.random(#(Plates:GetChildren()))
					for x,Plate in pairs(Plates:GetChildren()) do
						if PlateID == x then
							Plate.Size = Plate.Size * Vector3.new(2,1,2)
						end
					end
					Hint.Text = "One Plate gets twice as big."
					wait(2)
					Hint.Text = ""
				elseif EventID == 2 then
					local PlateID = math.random(#(Plates:GetChildren()))
					for x,Plate in pairs(Plates:GetChildren()) do
						if PlateID == x then
							Plate.Size = Plate.Size / Vector3.new(2,1,2)
						end
					end
					Hint.Text = "One Plate gets smaller by half."
					wait(2)
					Hint.Text = ""
				elseif EventID == 3 then
					local AlivePlayers = GetPlayersOnTeam(Alive)
					local PlayerID = math.random(#AlivePlayers)
					for x,Player in pairs(AlivePlayers) do
						if x == PlayerID then
							Player.Character:BreakJoints()
						end
					end
					Hint.Text = "One Player dies on the spot."
					wait(2)
					Hint.Text = ""
				end
			end
			local AlivePlayers = GetPlayersOnTeam(Alive)
			for _,Player in pairs(AlivePlayers) do
				Hint.Text = (Player.Name).." Wins!"
				wait(2)
				Hint.Text = ""
				Player.Team = Dead
				Player:LoadCharacter()
			end
			Plates:ClearAllChildren()
			wait(5)
		end
	end
	Hint.Text = "Not enough players, restarting..."
	wait(5)
	Hint:Destroy()
end
