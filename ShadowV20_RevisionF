local Player = owner -- Client Portion: https://github.com/chrdov/cbdove-code/raw/master/ClientControlsV5
local Character = Player.Character
local CloneT = Instance.new("Model")
for _,Part in pairs(Character:GetChildren()) do
	if (Part.Name ~= "HumanoidRootPart" and Part:IsA("BasePart")) then
		local PClone = Part:Clone()
		PClone.Color = Color3.new()
		PClone.Material = Enum.Material.SmoothPlastic
		for _,Thing in pairs(PClone:GetChildren()) do
			if (not Thing:IsA("DataModelMesh")) then
				Thing:Destroy()
			end
		end
		PClone.Parent = CloneT
	end
end
local KeyDown = Instance.new("RemoteEvent",Character)
local KeyUp = Instance.new("RemoteEvent",Character)
local MouseMove = Instance.new("RemoteEvent",Character)
KeyDown.Name = "KeyDown"
KeyUp.Name = "KeyUp"
MouseMove.Name = "MouseMove"
local InvisParts = {}
local debounce = {}
local heldKeys = {}
local Invisible = false
local Target = {}
KeyDown.OnServerEvent:Connect(function(Plr,Key)
	if Plr == Player and heldKeys[Key] == nil then
		heldKeys[Key] = true
		if debounce[Key] == nil then
			debounce[Key] = true
			if Key == "f" then
				if not Invisible then
					for _,Part in pairs(Character:GetDescendants()) do
						if (Part.Name ~= "HumanoidRootPart" and Part:IsA("BasePart")) or Part:IsA("Decal") then
							InvisParts[Part] = Part.Transparency
							local TweenService = game:GetService("TweenService")
							local TweenProperties = {Transparency = 1}
							local Tween = TweenService:Create(Part,TweenInfo.new(0.25),TweenProperties)
							Tween:Play()
						elseif Part:IsA("Humanoid") then
							spawn(function()
								wait(0.25)
								Part.WalkSpeed = Part.WalkSpeed * 1.5
								Part.MaxHealth = Part.MaxHealth * 10
								Part.Health = Part.Health * 10
							end)
						end
					end
					Invisible = not Invisible
					wait(0.25)
				elseif Invisible then
					for _,Part in pairs(Character:GetDescendants()) do
						if (Part.Name ~= "HumanoidRootPart" and Part:IsA("BasePart")) or Part:IsA("Decal") then
							local TweenService = game:GetService("TweenService")
							local TweenProperties = {Transparency = InvisParts[Part]}
							local Tween = TweenService:Create(Part,TweenInfo.new(0.25),TweenProperties)
							Tween:Play()
							InvisParts[Part] = nil
						elseif Part:IsA("Humanoid") then
							spawn(function()
								Part.WalkSpeed = Part.WalkSpeed / 1.5
								Part.Health = Part.Health / 10
								Part.MaxHealth = Part.MaxHealth / 10
							end)
						end
					end
					wait(0.25)
					Invisible = not Invisible
				end
			end
			debounce[Key] = nil
		end
	end
end)
local RunService = game:GetService("RunService")
RunService.Heartbeat:Connect(function()
	local TweenService = game:GetService("TweenService")
	local Debris = game:GetService("Debris")
	if Invisible then
		if Invisible then
			local Clone = CloneT:Clone()
			for _,Part2 in pairs(CloneT:GetChildren()) do
				local Part1 = Character:FindFirstChild(Part2.Name)
				if Part1 ~= nil then
					Part2.CFrame = Part1.CFrame
				end
			end
			Clone.Parent = game.Workspace
			for _,Part in pairs(Clone:GetDescendants()) do
				if (Part.Name ~= "HumanoidRootPart" and Part:IsA("BasePart")) or Part:IsA("Decal") then
					Part.Transparency = 0.9
					if (Part.Name ~= "HumanoidRootPart" and Part:IsA("BasePart")) then
						Part.Anchored = true
						Part.CanCollide = false
					end
					local TweenService = game:GetService("TweenService")
					local TweenProperties = {Transparency = 1}
					local Tween = TweenService:Create(Part,TweenInfo.new(0.25),TweenProperties)
					Tween:Play()
				end
			end
			Debris:AddItem(Clone,0.25)
		end
	end
end)
KeyUp.OnServerEvent:Connect(function(Plr,Key)
	if Plr == Player and heldKeys[Key] == true then
		heldKeys[Key] = nil
	end
end)
MouseMove.OnServerEvent:Connect(function(Plr,TargetPoint,TargetPart)
	if Plr == Player then
		Target.Point = TargetPoint
		Target.Part = TargetPart
	end
end)
